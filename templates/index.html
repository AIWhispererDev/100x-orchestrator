{% extends "base.html" %}

{% block content %}
    <div class="container">
        
        <!-- Agent Overview -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Agent Overview</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h6>Total Agents</h6>
                        <p class="h3" id="totalAgents">0</p>
                    </div>
                    <div class="col-md-4">
                        <h6>Active Tasks</h6>
                        <p class="h3" id="activeTasks">0</p>
                    </div>
                    <div class="col-md-4">
                        <h6>Repository</h6>
                        <p class="text-truncate" id="repoDisplay">Not set</p>
                    </div>
                </div>
                <div class="mt-3">
                    <button id="deleteAllAgents" class="btn btn-danger" style="display: none;">
                        <i class="fas fa-trash-alt me-1"></i>Delete All Agents
                    </button>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Create New Agents</h5>
                <div class="alert alert-info">
                    <h6>How to Use:</h6>
                    <p>Instead of entering a repository URL manually, simply replace <code>github.com</code> with <code>gitorchestrator.com</code> (or <code>localhost:5000</code> for local development) in any GitHub repository URL.</p>
                    <p>For example: <br>
                    <code>https://github.com/username/repo</code> â†’ <code>http://localhost:5000/username/repo</code></p>
                </div>
                <form id="agentForm">
                    <div class="form-group">
                        <label>Tasks</label>
                        <div class="d-flex gap-2 mb-2">
                            <button type="button" id="addTask" class="btn btn-secondary btn-sm">+ Add Another Task</button>
                            <button type="button" id="fetchIssues" class="btn btn-info btn-sm">Load GitHub Issues</button>
                        </div>
                        <div id="taskList">
                            <!-- Tasks will be dynamically populated here -->
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="numAgents">Number of Agents (optional)</label>
                        <input type="number" class="form-control" id="numAgents" min="1" max="10"
                               placeholder="Default: 2">
                    </div>
                    
                    <div class="form-group">
                        <label for="aiderCommands">Initial Aider Commands (optional)</label>
                        <textarea class="form-control" id="aiderCommands" rows="3"
                                placeholder="Commands to run after initialization..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Create Agents</button>
                </form>
            </div>
        </div>
        
        <div id="result" class="mt-4" style="display: none;">
            <div class="alert" role="alert"></div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
<script src="/static/js/index.js"></script>
{% endblock %}
